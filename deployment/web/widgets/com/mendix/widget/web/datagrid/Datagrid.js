define(["react","mendix/filters/builders","react-dom"],(function(e,t,n){"use strict";var r;!function(e){e.STRING="string",e.NUMBER="number",e.ENUMERATION="enum",e.DATE="date",e.ASSOCIATION="association"}(r||(r={}));const o="com.mendix.widgets.web.filterable.filterContext";function a(){const t=window[o];if(t)return{FilterContext:t};const n=e.createContext(void 0);return window[o]=n,{FilterContext:n}}const l=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);function i(e,t){if(function(e){return l(e,"arg1")&&l(e,"arg2")}(e)&&"attribute"===e.arg1.type&&e.arg1.attributeId===t.id&&(n=e.arg2,l(n,"type")&&l(n,"value")))return{type:e.name,value:e.arg2.value};var n}function s(e,t){var n;if(!e||!t)return[];return(null!==(n=c(t))&&void 0!==n?n:[]).flatMap((t=>{const n=i(t,e);return n?[n]:[]}))}function c(e){return!e||"function"!==e.type||"and"!==e.name&&"or"!==e.name?e?[e]:void 0:e.args.flatMap(c).filter((e=>void 0!==e))}const u=e=>{e&&e.canExecute&&!e.isExecuting&&e.execute()};class d{constructor(e){this.selectionValue=e,this.type="Single"}updateProps(e){this.selectionValue=e}isSelected(e){var t;return(null===(t=this.selectionValue.selection)||void 0===t?void 0:t.id)===e.id}add(e){this.selectionValue.setSelection(e)}remove(e){this.selectionValue.setSelection(void 0)}}class m{constructor(e,t,n){this.selectionValue=e,this.selectableItems=t,this.pageSize=n,this.type="Multi",this.rangeStart=void 0}isSelected(e){return this.selectionValue.selection.some((t=>t.id===e.id))}updateProps(e,t){this.selectionValue=e,this.selectableItems=t}get selectionStatus(){return 0===this.selectionValue.selection.length?"none":this.selectionValue.selection.length===this.selectableItems.length?"all":"some"}add(e){this._add(e),this._setRangeStart(e),this._setRangeEnd(void 0)}remove(e){this.isSelected(e)&&this.selectionValue.setSelection(this.selectionValue.selection.filter((t=>t.id!==e.id))),this._resetRange()}_add(e){this.isSelected(e)||this.selectionValue.setSelection(this.selectionValue.selection.concat(e))}_setRangeStart(e){let t=-1;void 0!==e&&(t=this.selectableItems.indexOf(e)),this.rangeStart=t>-1?t:void 0}_setRangeEnd(e){if(void 0===e)return void(this.rangeEnd=void 0);const t=this.rangeEnd,n=this.selectableItems.indexOf(e);this.rangeEnd=n>-1?n:void 0,this._updateSelectionWithRange(this.rangeStart,t,n)}_updateSelectionWithRange(e,t,n){if(void 0===e)return;if(-1===n)return;if(t===n)return;if(void 0===t){const t=this._getRange(e,n),r=this._union(this.selectionValue.selection,t);return void this.selectionValue.setSelection(r)}const r=this._getRange(e,t),o=this._getRange(e,n);let a=[...this.selectionValue.selection];a=this._diff(a,r),a=this._union(a,o),this.selectionValue.setSelection(a)}_getRange(e,t){const n=this.selectableItems.length,[r,o]=[p(e,0,n),p(t,0,n)].sort(((e,t)=>e-t));return this.selectableItems.slice(r,o+1)}_resetRange(){this._setRangeStart(void 0),this._setRangeEnd(void 0)}_union(e,t){const n=[...e],r=new Set(e.map((e=>e.id)));for(const e of t)r.has(e.id)||(r.add(e.id),n.push(e));return n}_diff(e,t){const n=new Set(e),r=new Set(t.map((e=>e.id)));for(const e of n)r.has(e.id)&&n.delete(e);return Array.from(n)}selectAll(){this.selectionValue.setSelection(this.selectableItems)}selectNone(){this.selectionValue.setSelection([])}selectUpTo(e){void 0===this.rangeStart?(this._add(e),this._setRangeStart(e)):this._setRangeEnd(e)}_getAdjacentIndex(e,t,n){const r=this.selectableItems.length-1,o="forward"===t;if("edge"===n)return o?r:0;let a;return a="page"===n?o?e+this.pageSize:e-this.pageSize:o?e+1:e-1,Math.max(0,Math.min(a,r))}selectUpToAdjacent(e,t,n,r){if(!1===t)return void this._resetRange();const o=this.selectableItems.findIndex((t=>t.id===e.id)),a=this._getAdjacentIndex(o,n,r);a!==o&&(void 0===this.rangeStart&&this._setRangeStart(e),this._setRangeEnd(this.selectableItems.at(a)))}}const p=(e,t,n)=>Math.min(Math.max(e,t),n);function f(t,n,r,o){const a=e.useRef([]),l=e.useRef(!1);l.current||(l.current="loading"!==(null==n?void 0:n.status)),e.useEffect((()=>{var e;const n=a.current,o=null!==(e=null==t?void 0:t.selection)&&void 0!==e?e:[],i=Array.isArray(o)?o:[o];(function(e,t){if(e.length!==t.length)return!1;const n=new Set(t.map((e=>e.id)));return e.every((e=>n.has(e.id)))})(n,i)||(a.current=i,l.current&&u(r))}),[null==t?void 0:t.selection,r]);const i=e.useRef(void 0);var s,c;void 0!==t&&("Single"===t.type?i.current?i.current.updateProps(t):i.current=new d(t):i.current?i.current.updateProps(t,null!==(s=n.items)&&void 0!==s?s:[]):i.current=new m(t,null!==(c=n.items)&&void 0!==c?c:[],o));return i.current}const g="com.mendix.widgets.web.selectable.selectionContext";const h={onSelect:()=>{},onSelectAll:()=>{},onSelectAdjacent:()=>{},isSelected:()=>!1};function v(){var e;null===(e=window.getSelection())||void 0===e||e.removeAllRanges()}const w=new Set(["MetaLeft","MetaRight","ControlLeft","ControlRight"]);const b=new Set(["ArrowUp","ArrowDown","PageUp","PageDown","Home","End"]);const y={ArrowUp:"item",ArrowDown:"item",PageUp:"page",PageDown:"page",Home:"edge",End:"edge"};function E(e,t,n){if(o=e.code,b.has(o)){if(("Home"===e.code||"End"===e.code)&&!1===e.ctrlKey)return;n.onSelectAdjacent(t,e.shiftKey,"ArrowUp"===(r=e.code)||"PageUp"===r||"Home"===r?"backward":"forward",y[e.code])}var r,o}function C(e){var t,n;"Space"===e.code&&(t=e.currentTarget,n=e.target,(Array.from(t.children).includes(n)||e.target===e.currentTarget)&&(e.stopPropagation(),e.preventDefault()))}function x(e,t){if("None"===e)return{};let n=!1;const[r,o]=function(e,t){let n=0,r=0;return[function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];const i=(new Date).getTime()-r,s=()=>{n=0,r=(new Date).getTime(),e(...a)};n||(i>=t?s():n=window.setTimeout(s,t-i))},()=>{clearTimeout(n),n=0}]}((function(){n=!0,document.body.style.userSelect="none",t.onSelectAll("selectAll")}),500);return{onKeyDown(e,n){e.shiftKey&&v(),!function(e){return"KeyA"===e.code&&(e.metaKey||e.ctrlKey)}(e)?E(e,n,t):r(),C(e)},onKeyUp(e,r){n&&(function(e){return w.has(e.code)}(e)||"KeyA"===e.code)&&(o(),n=!1,setTimeout((()=>{v(),document.body.style.userSelect=""}),250)),function(e){return"Space"===e.code&&e.shiftKey}(e)&&t.onSelect(r,!1),C(e)}}}function S(t){const{selectionMethod:n}=t,r=function(e){if(void 0===e)return"None";if("object"==typeof e)return e.type;if("None"===e||"Single"===e||"Multi"===e)return e;throw new Error("Unknown selection type: ".concat(e))}(t.selection),o=(a=t.helper,e.useMemo((()=>void 0===a?h:{onSelect:(e,t)=>{"Multi"===a.type&&t?a.selectUpTo(e):a.isSelected(e)?a.remove(e):a.add(e)},onSelectAll(e){"Single"!==a.type?"selectAll"!==e&&"all"===a.selectionStatus?a.selectNone():a.selectAll():console.warn("Datagrid: calling onSelectAll in single selection mode have no effect")},onSelectAdjacent(){"Single"!==a.type?a.selectUpToAdjacent(...arguments):console.warn("Datagrid: calling onSelectAdjacent in single selection mode have no effect")},isSelected:e=>a.isSelected(e)}),[a]));var a;const l="Multi"===r&&t.showSelectAllToggle,i="None"!==r&&"checkbox"===n,s=function(t,n){return e.useMemo((()=>x(t,n)),[t,n])}(r,o);return e.useMemo((function(){return{selectionType:r,selectionMethod:n,showSelectAllToggle:l,showCheckboxColumn:i,...o,...s}}),[r,n,l,i,o,s])}function I(){const e="com.mendix.widgets.web.UUID";return window[e]||(window[e]=1),window[e]++}var k,A={exports:{}};
/*!
  	Copyright (c) 2018 Jed Watson.
  	Licensed under the MIT License (MIT), see
  	http://jedwatson.github.io/classnames
  */k=A,function(){var e={}.hasOwnProperty;function t(){for(var n=[],r=0;r<arguments.length;r++){var o=arguments[r];if(o){var a=typeof o;if("string"===a||"number"===a)n.push(o);else if(Array.isArray(o)){if(o.length){var l=t.apply(null,o);l&&n.push(l)}}else if("object"===a){if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]")){n.push(o.toString());continue}for(var i in o)e.call(o,i)&&o[i]&&n.push(i)}}}return n.join(" ")}k.exports?(t.default=t,k.exports=t):window.classNames=t}();var N=A.exports;const P=e.memo(e.forwardRef((function(t,n){let{className:r,borderTop:o,clickable:a,previewAsHidden:l,wrapText:i,alignment:s,tabIndex:c,...u}=t;return e.createElement("div",{className:N("td",{"td-borders":o,clickable:a,"hidden-column-preview":l,"wrap-text":i,["align-column-".concat(s)]:"string"==typeof s},r),role:"gridcell",tabIndex:null!=c?c:a?0:void 0,ref:n,...u})})));function M(e,t){return"".concat(e,",").concat(t)}function _(e){const[t,n]=e.split(",");return[parseInt(t,10),parseInt(n,10)]}class O{constructor(e,t){this._listeners=[],this._focusTarget=this._getInitPosition(),this._positionController=e,this._layout=t}get focusTarget(){return this._focusTarget}addListener(e){this._listeners.push(e)}removeListener(e){this._listeners.splice(this._listeners.indexOf(e),1)}updateGridLayout(e){this._layout=e,void 0===this._layout.get(_(this._focusTarget))&&this._setTarget(this._getInitPosition())}dispatch(e){const t=this._positionController.dispatch(e,this._layout);void 0!==t&&t!==this._focusTarget&&("Keyboard"===e.type?this._setTargetAndFocus(t):this._setTarget(t))}_setTarget(e){const t=this._focusTarget;this._focusTarget=e,this._emit({lastPos:t,targetPos:e,shouldFocus:!1})}_setTargetAndFocus(e){const t=this._focusTarget;this._focusTarget=e,this._emit({lastPos:t,targetPos:e,shouldFocus:!0})}_emit(e){for(const t of this._listeners)t(e)}_getInitPosition(){return M(0,0)}}class R{constructor(e,t,n){this.columns=t,this.rows=e,this.pageSize=n,this._positions=new Set;for(let n=0;n<e;n+=1)for(let e=0;e<t;e+=1)this._positions.add(M(e,n))}get(e){let[t,n]=e;const r=M(t<0?this.columns+t:t,n<0?this.rows+n:n);if(this._positions.has(r))return r}}const T=new Set(["ArrowUp","ArrowRight","ArrowDown","ArrowLeft","PageUp","PageDown","End","Home"]);const L={ArrowUp:function(e){let[t,n]=e;return[t,Math.max(0,n-1)]},ArrowRight:function(e){let[t,n]=e;return[t+1,n]},ArrowDown:function(e){let[t,n]=e;return[t,n+1]},ArrowLeft:function(e){let[t,n]=e;return[Math.max(0,t-1),n]},PageUp:(e,t)=>function(e,t){let[n,r]=e;return[n,Math.max(0,r-t)]}(e,t.pageSize),PageDown:(e,t)=>function(e,t,n){let[r,o]=e;return[r,Math.min(n-1,o+t)]}(e,t.pageSize,t.rows),End:(e,t,n)=>{let{ctrlKey:r}=n;return r?[-1,-1]:function(e){let[t,n]=e;return[-1,n]}(e)},Home:(e,t,n)=>{let{ctrlKey:r}=n;return r?[0,0]:function(e){let[t,n]=e;return[0,n]}(e)}};class D{dispatch(e,t){return"Focus"===e.type?this._handleFocusEvent(e.reactEvent):"Mouse"===e.type?this._handleMouseEvent(e.reactEvent):this._handleKeyboardEvent(e.reactEvent,t)}_handleKeyboardEvent(e,t){if(n=e.code,!T.has(n))return;var n;if(!Object.hasOwn(L,e.code))throw new Error("Keyboard nav: can't find handler for ".concat(e.code," key"));e.preventDefault();const r=_(this._getTargetPosition(e));return t.get(L[e.code](r,t,e))}_handleMouseEvent(e){return this._getTargetPosition(e)}_handleFocusEvent(e){return this._getTargetPosition(e)}_getTargetPosition(e){var t;const n=null===(t=e.currentTarget.dataset)||void 0===t?void 0:t.position;if(void 0===n)throw new Error("Keyboard navigation: target position is missing");return n}}const z=Symbol("DefaultKeyNavContextValue"),V=e.createContext(z);function H(t){const n=function(t){let{rows:n,columns:r,pageSize:o}=t;const a=e.useRef(null);return e.useMemo((()=>{const e=new R(n,r,o);return null===a.current?a.current=new O(new D,e):a.current.updateGridLayout(e),a.current}),[n,r,o])}(t),r=e.useMemo((()=>({focusController:n})),[n]);return e.createElement(V.Provider,{value:r},t.children)}function F(t){const n=e.useRef(t.focusTarget),{focusController:r}=function(){const t=e.useContext(V);if(t===z)throw new Error("useKeyNavContext: context provider is missing");return t}(),[o,a]=e.useMemo((()=>{const e=M(t.columnIndex,t.rowIndex);return[e===r.focusTarget,e]}),[t.columnIndex,t.rowIndex,r.focusTarget]),[l,i]=e.useState({canFocus:!1}),s=e.useRef(null);return e.useEffect((()=>{const e=e=>i((t=>e.lastPos===a?{canFocus:!1}:e.targetPos===a?{canFocus:e.shouldFocus}:t));return r.addListener(e),()=>r.removeListener(e)}),[r,a]),e.useEffect((()=>{const{current:e}=n;if(l.canFocus){const t="function"==typeof e?e():s.current;null==t||t.focus()}}),[l]),{ref:s,tabIndex:o?0:-1,"data-position":a,onKeyDown:e.useCallback((e=>r.dispatch({type:"Keyboard",reactEvent:e})),[r]),onClick:e.useCallback((e=>r.dispatch({type:"Mouse",reactEvent:e})),[r]),onFocus:e.useCallback((e=>r.dispatch({type:"Focus",reactEvent:e})),[r])}}const K=e.memo((function(t){var n;const r=F({columnIndex:null!==(n=t.columnIndex)&&void 0!==n?n:-1,rowIndex:t.rowIndex});return e.createElement(P,{alignment:t.column.alignment,borderTop:0===t.rowIndex,className:t.column.columnClass(t.item),wrapText:t.column.wrapText,clickable:t.clickable,previewAsHidden:t.preview&&(t.column.initiallyHidden||!t.column.visible),...r},t.column.renderCellContent(t.item))}));function U(t){let{direction:n}=t;const r="pagination-icon ".concat(n);switch(n){case"forward":return e.createElement("span",{"aria-hidden":!0},e.createElement("svg",{className:r,viewBox:"0 0 32 32",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M17.81 6.63C17.48 6.37 17 6.61 17 7.02V24.98C17 25.4 17.48 25.63 17.81 25.37L28.5 16.39C28.76 16.19 28.76 15.8 28.5 15.6L17.81 6.63Z",fill:"currentColor"}),e.createElement("path",{d:"M4.81 6.63C4.48 6.37 4 6.61 4 7.02V24.98C4 25.4 4.48 25.63 4.81 25.37L15.5 16.39C15.76 16.19 15.76 15.8 15.5 15.6L4.81 6.63Z",fill:"currentColor"})));case"step-forward":return e.createElement("span",{"aria-hidden":!0},e.createElement("svg",{className:r,viewBox:"0 0 32 32",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M8.81 6.63C8.48 6.37 8 6.61 8 7.02V24.98C8 25.4 8.48 25.63 8.81 25.37L20.5 16.39C20.76 16.19 20.76 15.8 20.5 15.6L8.81 6.63Z",fill:"currentColor"}),e.createElement("path",{d:"M24 6H22V26H24V6Z",fill:"currentColor"})));case"backward":return e.createElement("span",{"aria-hidden":!0},e.createElement("svg",{className:r,viewBox:"0 0 32 32",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M14.19 6.63L3.51 15.61C3.25 15.81 3.25 16.2 3.51 16.4L14.2 25.38C14.53 25.64 15.01 25.4 15.01 24.99V7.02C15.01 6.6 14.53 6.37 14.2 6.63H14.19Z",fill:"currentColor"}),e.createElement("path",{d:"M27.19 6.63L16.5 15.61C16.24 15.81 16.24 16.2 16.5 16.4L27.19 25.38C27.52 25.64 28 25.4 28 24.99V7.02C28 6.6 27.52 6.37 27.19 6.63Z",fill:"currentColor"})));case"step-backward":return e.createElement("span",{"aria-hidden":!0},e.createElement("svg",{className:r,viewBox:"0 0 32 32",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M23.19 6.63L11.51 15.61C11.25 15.81 11.25 16.2 11.51 16.4L23.2 25.38C23.53 25.64 24.01 25.4 24.01 24.99V7.02C24.01 6.6 23.53 6.37 23.2 6.63H23.19Z",fill:"currentColor"}),e.createElement("path",{d:"M10 6H8V26H10V6Z",fill:"currentColor"})));default:return e.createElement("div",null)}}function B(t){var n,r,o,a,l,i,s;const c=void 0!==t.numberOfItems?Math.ceil(t.numberOfItems/t.pageSize):void 0,u=void 0!==c?c-1:0,d=void 0!==c,m=t.page*t.pageSize+1,p=t.canNextPage||!t.numberOfItems?(t.page+1)*t.pageSize:t.numberOfItems,f=e=>{t.setPaginationIndex&&t.setPaginationIndex(e)};if(0===t.numberOfItems)return null;const g="".concat(m," to ").concat(p," ").concat(d?"of ".concat(null!==(n=t.numberOfItems)&&void 0!==n?n:(null!=c?c:1)*t.pageSize):"");return e.createElement("div",{"aria-label":null!==(r=t.labelPagination)&&void 0!==r?r:"Pagination",className:"pagination-bar"},e.createElement("button",{className:"btn pagination-button",disabled:0===t.page,...j((()=>{t.gotoPage(0),f(0)})),"aria-label":null!==(o=t.labelFirstPage)&&void 0!==o?o:"Go to first page"},e.createElement(U,{direction:"step-backward"})),e.createElement("button",{className:"btn pagination-button",disabled:!t.canPreviousPage,...j((()=>{t.previousPage(),f(t.page-1)})),"aria-label":null!==(a=t.labelPreviousPage)&&void 0!==a?a:"Go to previous page"},e.createElement(U,{direction:"backward"})),e.createElement("span",{className:"sr-only sr-only-focusable"},null!==(l=t.labelPagingStatus)&&void 0!==l?l:"Currently showing"," ",g),e.createElement("div",{"aria-hidden":!0,className:"paging-status"},g),e.createElement("button",{"aria-label":null!==(i=t.labelNextPage)&&void 0!==i?i:"Go to next page",className:"btn pagination-button",disabled:!t.canNextPage,...j((()=>{t.nextPage(),f(t.page+1)}))},e.createElement(U,{direction:"forward"})),d&&e.createElement("button",{"aria-label":null!==(s=t.labelLastPage)&&void 0!==s?s:"Go to last page",className:"btn pagination-button",disabled:t.page===u,...j((()=>{t.gotoPage(u),f(u)}))},e.createElement(U,{direction:"step-forward"})))}function j(e){return{onClick:e,onKeyDown:t=>{" "!==t.key&&"Enter"!==t.key||(t.preventDefault(),t.stopPropagation(),e())}}}const Z=Symbol("NO_PROPS_VALUE"),W=e.createContext(Z),G=W.Provider;function X(){const t=e.useContext(W);if(t===Z)throw new Error("useTableProps: failed to get value from props provider.");return t}function q(t){let{id:n,value:r,onChange:o}=t;const a=e.useRef(null);return e.useEffect((()=>{a.current&&("all"===r||"none"===r?a.current.indeterminate=!1:"some"===r&&(a.current.indeterminate=!0))}),[r]),e.createElement("input",{id:n,type:"checkbox",className:"three-state-checkbox",ref:a,checked:"none"!==r,onChange:o})}function J(){const{selectionProps:t,selectionStatus:n}=X(),{showCheckboxColumn:r,showSelectAllToggle:o,onSelectAll:a}=t;if(!1===r)return e.createElement(e.Fragment,null);let l=null;if(o){if("unknown"===n)throw new Error("Don't know how to render checkbox with selectionStatus=unknown");l=e.createElement(q,{value:n,onChange:a})}return e.createElement("div",{className:"th widget-datagrid-col-select",role:"columnheader"},l)}function Y(t){const n=e.useRef(t);return e.useEffect((()=>{n.current=t})),e.useCallback((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.current&&n.current.apply(void 0,t)}),[])}function Q(t){let{minWidth:n=50,setColumnWidth:r,onResizeEnds:o}=t;const[a,l]=e.useState(!1),[i,s]=e.useState(0),[c,u]=e.useState(0),d=e.useRef(null),m=e.useCallback((e=>{const t=e.touches?e.touches[0].screenX:e.screenX;if(s(t),l(!0),d.current){const e=d.current.parentElement;u(e.clientWidth)}}),[]),p=e.useCallback((()=>{a&&(l(!1),u(0),null==o||o())}),[o,a]),f=Y(r),g=e.useCallback((e=>{if(!a)return;const t=e.touches?e.touches[0].screenX:e.screenX;if(c){let e=c-(i-t);e<n&&(e=n),f(e)}}),[a,c,i,n,f]);return e.useEffect((()=>(document.addEventListener("mousemove",g),document.addEventListener("mouseup",p),document.addEventListener("touchmove",g),document.addEventListener("touchend",p),()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",p),document.removeEventListener("touchmove",g),document.removeEventListener("touchend",p)})),[g,p]),e.createElement("div",{"aria-hidden":!0,ref:d,className:"column-resizer",onMouseDown:m,onTouchStart:m},e.createElement("div",{className:"column-resizer-bar"}))}function $(){return e.createElement("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"far","data-icon":"eye",className:"svg-inline--fa fa-eye fa-w-18",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},e.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.589893 7.715C0.724893 7.52 3.91989 3 7.99989 3C12.0799 3 15.2749 7.52 15.4099 7.715L15.6099 8L15.4099 8.285C15.2749 8.48 12.0799 13 7.99989 13C3.91989 13 0.724893 8.48 0.589893 8.285L0.389893 8L0.589893 7.715ZM1.62489 8C2.37489 8.96 4.98989 12 7.99989 12C11.0099 12 13.6249 8.96 14.3749 8C13.6249 7.04 11.0099 4 7.99989 4C4.98989 4 2.37489 7.04 1.62489 8ZM5.5 8C5.5 6.62 6.62 5.5 8 5.5C9.38 5.5 10.5 6.62 10.5 8C10.5 9.38 9.38 10.5 8 10.5C6.62 10.5 5.5 9.38 5.5 8ZM6.5 8C6.5 8.825 7.175 9.5 8 9.5C8.825 9.5 9.5 8.825 9.5 8C9.5 7.175 8.825 6.5 8 6.5C7.175 6.5 6.5 7.175 6.5 8Z",fill:"currentColor"}))}function ee(t,n){e.useEffect((()=>{const{current:e}=Array.isArray(t)?t[0]:t;if(!e)return;const r=e.ownerDocument,o=function(e,t){const n=Array.isArray(e)?e:[e];return e=>{n.every((t=>{let{current:n}=t;return n&&!n.contains(e.target)}))&&t()}}(t,n);return r.addEventListener("mousedown",o),r.addEventListener("touchstart",o),()=>{r.removeEventListener("mousedown",o),r.removeEventListener("touchstart",o)}}),[t,n])}function te(t,n){const[r,o]=e.useState(),a=e.useCallback((()=>{o((e=>{const n=null==t?void 0:t.getBoundingClientRect();return o=n,(r=e)&&o&&r.height===o.height&&r.width===o.width&&r.bottom===o.bottom&&r.top===o.top&&r.left===o.left&&r.right===o.right?e:n;var r,o}))}),[t]);var l;return l=n?a:void 0,e.useEffect((()=>l?function(e){let t;const n=()=>{t=window.requestAnimationFrame((()=>{e(),n()}))},r=()=>window.cancelAnimationFrame(t);return n(),r}(l):void 0),[l]),r}const ne=t=>{const n=t.current,[r,o]=e.useState(!0);return e.useLayoutEffect((()=>{const e=null==n?void 0:n.getBoundingClientRect(),t=!e||e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth);o(t)}),[n]),r};function re(t){var n;const{toggleHidden:r,visibleLength:o}=t,[a,l]=e.useState(!1),i=e.useRef(null),s=e.useRef(null),c=te(s.current,a);ee([s,i],(()=>l(!1)));const u=null!==(n=t.label)&&void 0!==n?n:"Column selector",d=ne(i),m=e.useMemo((()=>t.columns.findIndex((e=>e.canHide))),[t.columns]),p=e.useMemo((()=>t.columns.map((e=>e.canHide)).lastIndexOf(!0)),[t.columns]),f=e.createElement("ul",{ref:i,id:"".concat(t.id,"-column-selectors"),className:"column-selectors ".concat(d?"":"overflow"),"data-focusindex":0,role:"menu",style:{position:"fixed",top:null==c?void 0:c.bottom,right:void 0!==(null==c?void 0:c.right)?document.body.clientWidth-c.right:void 0}},t.columns.map(((n,a)=>{const i=!t.hiddenColumns.has(n.columnId),c=i&&1===o,u=()=>{c||r(n.columnId)};return n.canHide?e.createElement("li",{key:n.columnNumber,onClick:e=>{e.preventDefault(),e.stopPropagation(),u()},onKeyDown:e=>{var t;"Enter"===e.key||" "===e.key?(e.preventDefault(),e.stopPropagation(),u()):("Tab"===e.key&&(a===p||e.shiftKey&&a===m)||"Escape"===e.key)&&(e.preventDefault(),l(!1),null===(t=s.current)||void 0===t||t.focus())},role:"menuitem",tabIndex:0},e.createElement("input",{checked:i,disabled:c,id:"".concat(t.id,"_checkbox_toggle_").concat(a),style:{pointerEvents:"none"},type:"checkbox",tabIndex:-1,onChange:oe}),e.createElement("label",{htmlFor:"".concat(t.id,"_checkbox_toggle_").concat(a),style:{pointerEvents:"none"}},n.header)):null}))),g=e.useCallback((()=>{l((e=>!e)),setTimeout((()=>{var e,t;null===(t=null===(e=i.current)||void 0===e?void 0:e.querySelector("li"))||void 0===t||t.focus()}),10)}),[]);return e.createElement("div",{"aria-label":u,className:"th column-selector",role:"columnheader",title:u},e.createElement("div",{className:"column-selector-content"},e.createElement("button",{"aria-label":u,ref:s,className:"btn btn-default column-selector-button",onClick:g,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),e.stopPropagation(),g())},"aria-haspopup":!0,"aria-expanded":a,"aria-controls":"".concat(t.id,"-column-selectors")},e.createElement($,null))),a&&f)}function oe(){}function ae(t){const{children:n,className:r,...o}=t;return e.createElement("div",{className:N("widget-datagrid-grid table",r),role:"grid",...o},n)}function le(t){return e.createElement("div",{...t,className:N("widget-datagrid-grid-body table-content",t.className),role:"rowgroup"})}function ie(){return e.createElement("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"long-arrow-alt-down",className:"svg-inline--fa fa-long-arrow-alt-down fa-w-8",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 512"},e.createElement("path",{fill:"currentColor",d:"M168 345.941V44c0-6.627-5.373-12-12-12h-56c-6.627 0-12 5.373-12 12v301.941H41.941c-21.382 0-32.09 25.851-16.971 40.971l86.059 86.059c9.373 9.373 24.569 9.373 33.941 0l86.059-86.059c15.119-15.119 4.411-40.971-16.971-40.971H168z"}))}function se(){return e.createElement("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"long-arrow-alt-up",className:"svg-inline--fa fa-long-arrow-alt-up fa-w-8",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 512"},e.createElement("path",{fill:"currentColor",d:"M88 166.059V468c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12V166.059h46.059c21.382 0 32.09-25.851 16.971-40.971l-86.059-86.059c-9.373-9.373-24.569-9.373-33.941 0l-86.059 86.059c-15.119 15.119-4.411 40.971 16.971 40.971H88z"}))}function ce(){return e.createElement("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"arrows-alt-v",className:"svg-inline--fa fa-arrows-alt-v fa-w-8",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 512"},e.createElement("path",{fill:"currentColor",d:"M214.059 377.941H168V134.059h46.059c21.382 0 32.09-25.851 16.971-40.971L144.971 7.029c-9.373-9.373-24.568-9.373-33.941 0L24.971 93.088c-15.119 15.119-4.411 40.971 16.971 40.971H88v243.882H41.941c-21.382 0-32.09 25.851-16.971 40.971l86.059 86.059c9.373 9.373 24.568 9.373 33.941 0l86.059-86.059c15.12-15.119 4.412-40.971-16.97-40.971z"}))}function ue(t){var n,r;const o=t.sortable&&t.column.canSort,a=t.draggable&&null!==(n=t.column.canDrag)&&void 0!==n&&n,l=function(t,n,r,o){const a=e.useCallback((e=>{var t;o(!0);const n=e.target;e.dataTransfer.setData(de,null!==(t=n.dataset.columnId)&&void 0!==t?t:"")}),[o]),l=e.useCallback((e=>{e.preventDefault()}),[]),i=e.useCallback((e=>{const{dataset:{columnId:t}}=e.target;t!==e.dataTransfer.getData(de)&&r(t)}),[r]),s=e.useCallback((()=>{o(!1),r(void 0)}),[r,o]),c=e.useCallback((e=>{s();const t=e.target.dataset.columnId,r=e.dataTransfer.getData(de);n([t,r])}),[s,n]);return t?{draggable:!0,onDragStart:a,onDragOver:l,onDrop:c,onDragEnter:i,onDragEnd:s}:{}}(a,t.swapColumns,t.setDragOver,t.setIsDragging),i=!!t.sortRule,s=i&&"desc"===(null===(r=t.sortRule)||void 0===r?void 0:r[1]),c=o?i?s?e.createElement(ie,null):e.createElement(se,null):e.createElement(ce,null):null,u=t.column.header.trim(),d=()=>{t.setSortBy(t.column.columnId)},m={onClick:d,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),d())},role:"button",tabIndex:0};return e.createElement("div",{"aria-sort":o?i?s?"descending":"ascending":"none":void 0,className:N("th",{"hidden-column-preview":t.preview&&(t.hidable&&t.column.initiallyHidden||!t.column.visible)}),role:"columnheader",style:t.sortable&&t.column.canSort?void 0:{cursor:"unset"},title:u},e.createElement("div",{className:N("column-container",{dragging:a&&t.column.columnId===t.dragOver}),id:"".concat(t.gridId,"-column").concat(t.column.columnId),"data-column-id":t.column.columnId,...l},e.createElement("div",{className:N("column-header",o?"clickable":"",t.className),style:{pointerEvents:t.isDragging?"none":void 0},...o?m:void 0,"aria-label":o?"sort "+u:u},e.createElement("span",null,u.length>0?u:" "),c),t.filterable&&t.filterWidget),t.resizable&&t.column.canResize&&t.resizer)}const de="application/x-mx-widget-web-datagrid-column-id";function me(e,t){const n=()=>u(null==t?void 0:t.get(e));let r=!1;return{onClick:n,onKeyDown(e){"Enter"!==e.code&&"Space"!==e.code||(r=!0)},onKeyUp(e){var t,o;"Enter"!==e.code&&"Space"!==e.code||(t=e.currentTarget,o=e.target,Array.from(t.children).includes(o)&&r&&n(),r=!1)}}}function pe(e,t){if("None"===t.selectionType)return{};return{onClick(n){n.shiftKey&&v(),((e,n)=>{t.onSelect(e,n)})(e,n.shiftKey)},onKeyDown(n){var r;null===(r=t.onKeyDown)||void 0===r||r.call(t,n,e)},onKeyUp(n){var r;null===(r=t.onKeyUp)||void 0===r||r.call(t,n,e)}}}function fe(t){return e.createElement(P,{...t,className:"column-selector"})}function ge(t){let{rowIndex:n,columnIndex:r,checked:o,onInputClick:a,checkboxAriaLabel:l,lastRow:i,...s}=t;const c=e.useRef(null),u=F({columnIndex:null!=r?r:-1,rowIndex:n,focusTarget:e.useCallback((()=>c.current),[])});return e.createElement(P,{...s,...u,className:"widget-datagrid-col-select",tabIndex:-1},e.createElement("input",{checked:o,type:"checkbox",tabIndex:u.tabIndex,onChange:ve,onClick:a,onFocus:i?he:void 0,ref:c,"aria-label":"".concat(null!=l?l:"Select row"," ").concat(n+1)}))}function he(e){var t;"function"==typeof(null===(t=e.target.parentElement)||void 0===t?void 0:t.scrollIntoView)&&e.target.parentElement.scrollIntoView(!1)}function ve(){}function we(t){const{CellComponent:n,index:r}=t,{selectionProps:o,preview:a,selectRowLabel:l,data:i}=X(),s=o.isSelected(t.item),c="None"===o.selectionType?void 0:s,[u,{cellClickableClass:d}]=function(t,n,r){return e.useMemo((function(){const e=function(e,t){return"Single"===e||"Multi"===e?"RowActAsSelectable":t?"RowActAsButton":"None"}(n.selectionType,r);let o={};return"RowActAsButton"===e&&(o=me(t,r)),"RowActAsSelectable"===e&&(o=pe(t,n)),[o,{cellClickableClass:"None"!==e}]}),[t,n,r])}(t.item,o,t.rowAction);return e.createElement("div",{className:N("tr",{"tr-selected":s},t.className),role:"row","aria-selected":c,...u,onClick:o.showCheckboxColumn?void 0:u.onClick},o.showCheckboxColumn&&e.createElement(ge,{key:"checkbox_cell",borderTop:0===r,clickable:d,rowIndex:r,columnIndex:0,checked:s,onInputClick:u.onClick,checkboxAriaLabel:l,lastRow:r===i.length-1}),t.columns.map(((r,l)=>{const i=e.createElement(n,{key:"row_".concat(t.item.id,"_col_").concat(r.columnNumber),column:r,rowIndex:t.index,columnIndex:o.showCheckboxColumn?l+1:l,item:t.item,clickable:d,preview:a});return a?t.selectableWrapper(l,i):i})),t.showSelectorCell&&e.createElement(fe,{key:"column_selector_cell",borderTop:0===r,clickable:d,tabIndex:-1}))}function be(t){var n,r;const[o,a]=e.useState(!1),l=null!==(r=(n=e.useRef()).current)&&void 0!==r?r:n.current=function(e){let{setIsIntersecting:t}=e;return new IntersectionObserver((e=>{let[n]=e;t(n.isIntersecting)}))}({setIsIntersecting:a});return e.useEffect((()=>(t.current&&l.observe(t.current),()=>{l.disconnect()})),[l,t]),o}const ye=30;function Ee(){const t=e.useRef(null),[n,r]=e.useState(1);return e.useEffect((()=>{const e=t.current;if(null!==e)return function(e,t){const n=new IntersectionObserver((e=>{let[n]=e;0!==n.intersectionRatio&&1!==n.intersectionRatio||t(n.intersectionRatio)}),{threshold:[0,1]});return n.observe(e),()=>n.unobserve(e)}(e,r)}),[]),e.createElement("div",{className:N("sticky-sentinel",{"container-stuck":0===n}),ref:t,style:{height:1,marginBottom:"-1px"}})}function Ce(t){let{children:n,className:r,hasMoreItems:o,isInfinite:a,style:l,setPage:i}=t;const[s,c,u]=function(t){const{setPage:n,hasMoreItems:r,isInfinite:o}=t,[a,l]=e.useState(0),i=e.useRef(null),s=be(i),c=e.useCallback((e=>{Math.floor(e.target.scrollHeight-ye-e.target.scrollTop)<=Math.floor(e.target.clientHeight)+2&&r&&n&&n((e=>e+1))}),[r,n]),u=e.useCallback((()=>{s&&o&&r&&a<=0&&i.current&&l(i.current.clientHeight-ye)}),[o,r,a,s]);return e.useLayoutEffect((()=>{setTimeout((()=>u()),100)}),[u]),[c,a,i]}({hasMoreItems:o,isInfinite:a,setPage:i});return e.createElement("div",{className:N("widget-datagrid-content","sticky-table-container",{"infinite-loading":a},r),ref:u,onScroll:a?s:void 0,style:a&&c>0?{...l,maxHeight:c}:l},e.createElement(Ee,null),n)}function xe(t){const{pagingPosition:n,pagination:r,...o}=t;return e.createElement("div",{...o,className:"widget-datagrid-footer table-footer"},("bottom"===n||"both"===n)&&r)}function Se(t){const{children:n,headerTitle:r,...o}=t;return n?e.createElement("div",{...o,className:"widget-datagrid-header header-filters","aria-label":r||void 0},n):null}function Ie(t){const{className:n,selectionMethod:r,selection:o,exporting:a,children:l,...i}=t;return e.createElement("div",{...i,className:N(n,"widget-datagrid",{"widget-datagrid-exporting":a,"widget-datagrid-selectable-rows":o,"widget-datagrid-selection-method-checkbox":o&&"checkbox"===r,"widget-datagrid-selection-method-click":o&&"rowClick"===r})},l)}function ke(t){return e.createElement("div",{...t,className:"widget-datagrid-top-bar table-header"},t.children)}function Ae(t){return e.createElement("div",{className:"widget-datagrid-modal-root",role:"presentation"},e.createElement("div",{className:"widget-datagrid-modal-overlay",role:"presentation"}),e.createElement("div",{className:"widget-datagrid-modal-main",role:"presentation"},t.children))}function Ne(){return Ne=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ne.apply(this,arguments)}function Pe(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];const o=n[0];if(1===n.length)return o;const a=()=>{const t=n.map((e=>({useScope:e(),scopeName:e.scopeName})));return function(n){const r=t.reduce(((e,t)=>{let{useScope:r,scopeName:o}=t;return{...e,...r(n)["__scope".concat(o)]}}),{});return e.useMemo((()=>({["__scope".concat(o.scopeName)]:r})),[r])}};return a.scopeName=o.scopeName,a}function Me(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>t.forEach((t=>function(e,t){"function"==typeof e?e(t):null!=e&&(e.current=t)}(t,e)))}const _e=e.forwardRef(((t,n)=>{const{children:r,...o}=t,a=e.Children.toArray(r),l=a.find(Te);if(l){const t=l.props.children,r=a.map((n=>n===l?e.Children.count(t)>1?e.Children.only(null):e.isValidElement(t)?t.props.children:null:n));return e.createElement(Oe,Ne({},o,{ref:n}),e.isValidElement(t)?e.cloneElement(t,void 0,r):null)}return e.createElement(Oe,Ne({},o,{ref:n}),r)}));_e.displayName="Slot";const Oe=e.forwardRef(((t,n)=>{const{children:r,...o}=t;return e.isValidElement(r)?e.cloneElement(r,{...Le(o,r.props),ref:n?Me(n,r.ref):r.ref}):e.Children.count(r)>1?e.Children.only(null):null}));Oe.displayName="SlotClone";const Re=t=>{let{children:n}=t;return e.createElement(e.Fragment,null,n)};function Te(t){return e.isValidElement(t)&&t.type===Re}function Le(e,t){const n={...t};for(const r in t){const o=e[r],a=t[r];/^on[A-Z]/.test(r)?o&&a?n[r]=function(){a(...arguments),o(...arguments)}:o&&(n[r]=o):"style"===r?n[r]={...o,...a}:"className"===r&&(n[r]=[o,a].filter(Boolean).join(" "))}return{...e,...n}}const De=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce(((t,n)=>{const r=e.forwardRef(((t,r)=>{const{asChild:o,...a}=t,l=o?_e:n;return e.useEffect((()=>{window[Symbol.for("radix-ui")]=!0}),[]),e.createElement(l,Ne({},a,{ref:r}))}));return r.displayName="Primitive.".concat(n),{...t,[n]:r}}),{}),ze="Progress",Ve=100,[He,Fe]=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[];const o=()=>{const n=r.map((t=>e.createContext(t)));return function(r){const o=(null==r?void 0:r[t])||n;return e.useMemo((()=>({["__scope".concat(t)]:{...r,[t]:o}})),[r,o])}};return o.scopeName=t,[function(n,o){const a=e.createContext(o),l=r.length;function i(n){const{scope:r,children:o,...i}=n,s=(null==r?void 0:r[t][l])||a,c=e.useMemo((()=>i),Object.values(i));return e.createElement(s.Provider,{value:c},o)}return r=[...r,o],i.displayName=n+"Provider",[i,function(r,i){const s=(null==i?void 0:i[t][l])||a,c=e.useContext(s);if(c)return c;if(void 0!==o)return o;throw new Error("`".concat(r,"` must be used within `").concat(n,"`"))}]},Pe(o,...n)]}(ze),[Ke,Ue]=He(ze),Be=e.forwardRef(((t,n)=>{const{__scopeProgress:r,value:o,max:a,getValueLabel:l=Ze,...i}=t,s=Xe(a)?a:Ve,c=qe(o,s)?o:null,u=Ge(c)?l(c,s):void 0;return e.createElement(Ke,{scope:r,value:c,max:s},e.createElement(De.div,Ne({"aria-valuemax":s,"aria-valuemin":0,"aria-valuenow":Ge(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":We(c,s),"data-value":null!=c?c:void 0,"data-max":s},i,{ref:n})))}));Be.propTypes={max(e,t,n){const r=e[t],o=String(r);return r&&!Xe(r)?new Error(function(e,t){return"Invalid prop `max` of value `".concat(e,"` supplied to `").concat(t,"`. Only numbers greater than 0 are valid max values. Defaulting to `").concat(Ve,"`.")}(o,n)):null},value(e,t,n){const r=e[t],o=String(r),a=Xe(e.max)?e.max:Ve;return null==r||qe(r,a)?null:new Error(function(e,t){return"Invalid prop `value` of value `".concat(e,"` supplied to `").concat(t,"`. The `value` prop must be:\n  - a positive number\n  - less than the value passed to `max` (or ").concat(Ve," if no `max` prop is set)\n  - `null` if the progress is indeterminate.\n\nDefaulting to `null`.")}(o,n))}};const je=e.forwardRef(((t,n)=>{var r;const{__scopeProgress:o,...a}=t,l=Ue("ProgressIndicator",o);return e.createElement(De.div,Ne({"data-state":We(l.value,l.max),"data-value":null!==(r=l.value)&&void 0!==r?r:void 0,"data-max":l.max},a,{ref:n}))}));function Ze(e,t){return"".concat(Math.round(e/t*100),"%")}function We(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function Ge(e){return"number"==typeof e}function Xe(e){return Ge(e)&&!isNaN(e)&&e>0}function qe(e,t){return Ge(e)&&!isNaN(e)&&e<=t&&e>=0}const Je=Be,Ye=je;function Qe(){return e.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},e.createElement("path",{d:"M14.205 3.205L12.795 1.795L8 6.585L3.205 1.795L1.795 3.205L6.585 8L1.795 12.795L3.205 14.205L8 9.415L12.795 14.205L14.205 12.795L9.415 8L14.205 3.205Z",fill:"currentColor"}))}function $e(){return e.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},e.createElement("rect",{x:"13.3773",y:"10.5415",width:"5.30402",height:"14.7575",fill:"white"}),e.createElement("path",{d:"M29.71 24.97L23.77 15.11L17.64 4.94C16.89 3.69 15.11 3.69 14.36 4.94L8.23002 15.11L2.29002 24.97C1.50002 26.29 2.42002 28 3.94002 28H28.06C29.58 28 30.5 26.29 29.71 24.97ZM16 25C14.9 25 14 24.1 14 23C14 22 14.74 21.18 15.7 21.03C15.8 21.01 15.9 21 16 21C16.1 21 16.21 21.01 16.3 21.03C17.26 21.18 18 22 18 23C18 24.1 17.1 25 16 25ZM18 19H14V11H18V19Z",fill:"currentColor"}))}function et(t){let{alertLabel:n,cancelLabel:r,failed:o,onCancel:a,progress:l,total:i}=t;const[s]=e.useState((()=>"widget-datagrid-export-alert-".concat(I())));return e.createElement("div",{id:s,className:N("widget-datagrid-export-alert",{"widget-datagrid-export-alert-failed":o}),role:"status","aria-live":"off","aria-label":n},e.createElement("button",{role:"button",className:"btn btn-image btn-icon widget-datagrid-export-alert-cancel",onClick:a,"aria-label":r,tabIndex:0},e.createElement(Qe,null)),e.createElement("div",{className:"widget-datagrid-export-alert-message"},o?e.createElement($e,null):e.createElement("p",null,nt(i)?function(e,t){return"".concat(e," / ").concat(t)}(l,i):l)),e.createElement(tt,{progress:l,total:i}))}function tt(t){let{progress:n,total:r}=t;const o=nt(r)&&r;return e.createElement(Je,{className:"widget-datagrid-export-progress",value:o?n:null,max:r},e.createElement(Ye,{className:N("widget-datagrid-export-progress-indicator",{"widget-datagrid-export-progress-indicator-indeterminate":!o}),style:o?rt(n,r):void 0}))}function nt(e){return"number"==typeof e&&e>0}function rt(e,t){return{transform:"translateX(-".concat(100-ot(e,0,t),"%)")}}function ot(e,t,n){if(e<t)return 0;if(e>n)return 100;const r=n-t,o=Math.round((e-t)/r*100);return Math.abs(o)}function at(t){let{open:n,...r}=t;return n?e.createElement(Ae,null,e.createElement(et,{...r})):null}function lt(t){var n,r;const{className:o,columnsDraggable:a,columnsFilterable:l,columnsHidable:i,columnsResizable:s,columnsSortable:c,data:u,emptyPlaceholderRenderer:d,exporting:m,filterRenderer:p,headerContent:f,headerTitle:g,hasMoreItems:h,headerWrapperRenderer:v,id:w,numberOfItems:b,onExportCancel:y,page:E,pageSize:C,paging:x,pagingPosition:S,preview:I,processedRows:k,setPage:A,styles:P,selectionProps:M,CellComponent:_,state:O,actions:R}=t,T=I?O.allColumns:O.visibleColumns,L=(i?1:0)+(t.selectionProps.showCheckboxColumn?1:0),D=T.length+(t.selectionProps.showCheckboxColumn?1:0),z=T.length+L,V=!x,[F,K]=e.useState(!1),[U,j]=e.useState(void 0),Z=!!f,W=x&&("top"===S||"both"===S),X=e.useCallback((t=>e.createElement("div",{className:"filter",style:{pointerEvents:F?"none":void 0}},t)),[F]),q=x?e.createElement(B,{canNextPage:h,canPreviousPage:0!==E,gotoPage:e=>A&&A((()=>e)),nextPage:()=>A&&A((e=>e+1)),numberOfItems:b,page:E,pageSize:C,previousPage:()=>A&&A((e=>e-1))}):null,Y=e.useMemo((()=>function(e,t,n){const r=e.map((e=>{const n=t[e.columnId];if(n)return"".concat(n,"px");switch(e.width){case"autoFit":return"fit-content(100%)";case"manual":return"".concat(e.weight,"fr");default:return"1fr"}})),o=[];n.selectItemColumn&&o.push("fit-content(48px)");o.push(...r),n.visibilitySelectorColumn&&o.push("fit-content(50px)");return{gridTemplateColumns:o.join(" ")}}(T,t.state.size,{selectItemColumn:M.showCheckboxColumn,visibilitySelectorColumn:i})),[t.state.size,T,i,M.showCheckboxColumn]),$="None"!==t.selectionProps.selectionType;return e.createElement(G,{value:t},e.createElement(Ie,{className:o,selectionMethod:M.selectionMethod,selection:$,style:P,exporting:m},W&&e.createElement(ke,null,q),Z&&e.createElement(Se,{headerTitle:g},f),e.createElement(Ce,{isInfinite:V,hasMoreItems:h,setPage:A},e.createElement(ae,{"aria-multiselectable":$?"Multi"===M.selectionType:void 0},e.createElement(le,{style:Y},e.createElement("div",{key:"headers_row",className:"tr",role:"row"},e.createElement(J,{key:"headers_column_select_all"}),T.map(((n,r)=>v(r,e.createElement(ue,{key:"".concat(n.columnId),className:"align-column-".concat(n.alignment),gridId:t.id,column:n,draggable:a,dragOver:U,filterable:l,filterWidget:p(X,n.columnNumber),hidable:i,isDragging:F,preview:I,resizable:s,resizer:e.createElement(Q,{setColumnWidth:e=>R.resize([n.columnId,e])}),swapColumns:R.swap,setDragOver:j,setIsDragging:K,setSortBy:R.sortBy,sortable:c,sortRule:O.sortOrder.find((e=>{let[t]=e;return n.columnId===t})),visibleColumns:O.visibleColumns})))),i&&e.createElement(re,{key:"headers_column_selector",columns:O.availableColumns,hiddenColumns:O.hidden,id:w,toggleHidden:R.toggleHidden,visibleLength:O.visibleColumns.length})),e.createElement(H,{rows:t.data.length,columns:D,pageSize:t.pageSize},u.map(((n,r)=>{var o;return e.createElement(we,{CellComponent:_,className:null===(o=t.rowClass)||void 0===o?void 0:o.call(t,n),columns:T,index:r,item:n,key:"row_".concat(n.id),rowAction:t.rowAction,showSelectorCell:i,preview:null!=I&&I,selectableWrapper:v})}))),(0===u.length||I)&&d&&d((t=>e.createElement("div",{key:"row-footer",className:N("td",{"td-borders":!I}),style:{gridColumn:"span ".concat(z)}},e.createElement("div",{className:"empty-placeholder"},t))))))),e.createElement(xe,{pagination:q,pagingPosition:S}),e.createElement(at,{alertLabel:null!==(n=t.exportDialogLabel)&&void 0!==n?n:"Export progress",cancelLabel:null!==(r=t.cancelExportLabel)&&void 0!==r?r:"Cancel data export",failed:!1,onCancel:y,open:m,progress:k,total:b})))}const it=e.memo((t=>{const n=(void 0===window[g]&&(window[g]=e.createContext(void 0)),window[g]),r=function(){let t=window[o];return null==t&&(t=e.createContext(void 0),window[o]=t),t}(),a=t.state,l=e.useMemo((()=>t.filterList.reduce(((e,t)=>{let{filter:n}=t;return{...e,[n.id]:n}}),{})),[t.filterList]),[i]=e.useState((()=>t.filterList.reduce(((e,n)=>{let{filter:r}=n;return{...e,[r.id]:s(r,t.viewStateFilters)}}),{})));return e.createElement(r.Provider,{value:{filterDispatcher:e=>{if(e.filterType){const[,n]=a[e.filterType];n(e),t.setFiltered(!0)}return e},multipleAttributes:l,multipleInitialFilters:i}},e.createElement(n.Provider,{value:t.selectionContextValue},t.children))}));it.displayName="WidgetHeaderContext";const st=it;function ct(e){if(null==e)throw new Error(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Did not expect an argument to be undefined");return e}function ut(e){if(e.filterAssociation)return function(e){const t=e=>"Can't map ColumnsType to AssociationProperties: ".concat(e," is undefined"),n=ct(e.filterAssociation,t("filterAssociation")),r=ct(e.filterAssociationOptions,t("filterAssociationOptions")),o=ct(e.filterAssociationOptionLabel,t("filterAssociationOptionLabel"));return{association:n,optionsSource:r,getOptionLabel:e=>{var t;return null!==(t=o.get(e).value)&&void 0!==t?t:"Error: unable to get caption"}}}(e)}const dt=e=>e&&"available"===e.status&&e.value,mt="com.mendix.widgets.web.datagrid.export",pt=200,ft=Symbol("overwrite"),gt=t=>{const[n,r]=function(t){let{columns:n,items:r=[],offset:o,limit:a=pt,hasMoreItems:l,updateDataSource:i}=t;const[s,c]=e.useReducer(vt,ht()),[u,d]=e.useMemo(wt,[]);return e.useEffect((()=>c({type:"DataSourceUpdate",payload:{items:r,offset:o,limit:a,hasMoreItems:l}})),[r,o,a,l]),e.useEffect((()=>{c({type:"ColumnsUpdate",payload:{columns:n}})}),[n]),e.useEffect((()=>{u(s,c,i)}),[s]),e.useEffect((()=>d),[]),[{currentLimit:s.currentLimit,exporting:s.exporting,items:s.exporting?s.snapshot.items:null!=r?r:[],processedRows:s.processedRows},c]}(t);e.useEffect((()=>{window[mt]||(window[mt]={}),window.DATAGRID_DATA_EXPORT||(window.DATAGRID_DATA_EXPORT="");let e,n=!1,o=!1;const a={create(){if(o)throw new Error("Data grid (Export): export stream is busy");let n=!1;return{process:(a,l)=>{const{limit:i=pt}=null!=l?l:{},s=e=>{"aborted"!==e.type&&"end"!==e.type||(o=!1,n=!1),a(e)};r({type:"Setup",payload:{callback:s,columns:t.columns,limit:Math.min(i,500)}}),e=()=>{o&&s({type:"aborted"})},n=!0},start:()=>{if(!n)throw new Error("Data grid (Export): can't start without handler.");r({type:"Start"})},abort:()=>{r({type:"Abort"})}}},[ft]:()=>{n=!0}},l=window[mt][t.name];return l&&l[ft](),window[mt][t.name]=a,window.DATAGRID_DATA_EXPORT=mt,()=>{null==e||e(),!1===n&&delete window[mt][t.name]}}),[]);return[n,e.useMemo((()=>({abort:()=>r({type:"Abort"})})),[r])]};function ht(){return{callback:null,columns:null,currentItems:[],currentLimit:Number.POSITIVE_INFINITY,currentOffset:0,exporting:!1,hasMoreItems:!0,phase:"awaitingCallback",processedRows:0,snapshot:null}}function vt(e,t){if("Reset"===t.type)return ht();if("DataSourceUpdate"===t.type){if("awaitingCallback"===e.phase&&function(e,t){let{payload:n}=t;if(e.currentLimit===n.limit&&e.currentOffset===n.offset&&e.hasMoreItems==e.hasMoreItems&&e.currentItems.length===n.items.length)return e.currentItems.every(((e,t)=>{const r=n.items[t];return e.id===r.id}));return!1}(e,t))return e;const n=e.phase,r={...e,currentOffset:t.payload.offset,currentLimit:t.payload.limit,currentItems:t.payload.items,hasMoreItems:t.payload.hasMoreItems};return r.exporting&&"awaitingData"===n&&(r.phase="exportData"),r.exporting&&"resetOffset"===n&&(0===r.currentItems.length?r.phase="finished":r.phase="exportData"),r.exporting&&"finally"===n?{...ht(),currentLimit:t.payload.limit,currentItems:t.payload.items,currentOffset:t.payload.offset}:r}if("ColumnsUpdate"===t.type&&("readyToStart"===e.phase||"exportColumns"===e.phase||"exportData"===e.phase))return{...e,columns:t.payload.columns};if("Setup"===t.type&&"awaitingCallback"===e.phase)return{...e,phase:"readyToStart",snapshot:{items:e.currentItems,offset:e.currentOffset,limit:e.currentLimit},callback:t.payload.callback,columns:t.payload.columns,currentLimit:t.payload.limit,currentOffset:0};if("Start"===t.type){if(e.exporting)return e;if("readyToStart"===e.phase&&e.callback instanceof Function)return{...e,phase:"exportColumns",exporting:!0};throw new Error("Datagrid (Export): Export start failed: invalid state.")}return"ColumnsExported"===t.type&&e.exporting&&"exportColumns"===e.phase?{...e,phase:"resetOffset"}:"PageExported"===t.type&&e.exporting&&"exportData"===e.phase?{...e,phase:"awaitingData",processedRows:e.processedRows+e.currentLimit}:"Finish"===t.type&&e.exporting?{...e,phase:"finished"}:"Abort"===t.type&&e.exporting?{...e,phase:"aborting"}:"ExportEnd"===t.type&&e.exporting?{...e,phase:"finally",processedRows:0}:e}function wt(){let e=null;const t=()=>(null===e&&(e=new bt),e),n=()=>{e=new bt};return[async(e,r,o)=>{const a=t();if(!1!==e.exporting)if("resetOffset"!==e.phase){if("exportColumns"===e.phase){const{columns:t,callback:n}=e;return await a.exec((()=>n(function(e){return{type:"columns",payload:e.map((e=>{var t,n,r,o;return{name:e.header&&dt(e.header)&&null!==(n=null===(t=e.header.value)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",type:null!==(o=null===(r=e.attribute)||void 0===r?void 0:r.type.toString())&&void 0!==o?o:""}}))}}(t)))),void a.exec((()=>r({type:"ColumnsExported"})))}if("exportData"!==e.phase)if("awaitingData"!==e.phase){if("aborting"===e.phase){const{callback:t}=e;return a.exec((()=>t({type:"aborted"}))),a.exec((()=>r({type:"ExportEnd"}))),void a.abort("abortAction")}if("finished"===e.phase){const{callback:t}=e;return a.exec((()=>t({type:"end"}))),void a.exec((()=>r({type:"ExportEnd"})))}if("finally"===e.phase){const{snapshot:t}=e;!1!==a.isAborted&&"abortAction"!==a.abortReason||o({offset:t.offset,limit:t.limit}),n()}}else{const{currentOffset:t,currentLimit:n,hasMoreItems:l}=e;l?a.exec((()=>o({offset:t+n}))):a.exec((()=>r({type:"Finish"})))}else{const{currentItems:t,callback:n,columns:o}=e;if(t.length>0){const e=function(e,t){let n=!1;const r=e.map((e=>t.map((t=>{var r,o,a,l,i;let s="";if("attribute"===t.showContentAs)s=null!==(a=null===(o=null===(r=t.attribute)||void 0===r?void 0:r.get(e))||void 0===o?void 0:o.displayValue)&&void 0!==a?a:"";else if("dynamicText"===t.showContentAs){const r=null===(l=t.dynamicText)||void 0===l?void 0:l.get(e);"loading"===(null==r?void 0:r.status)?n=!0:s="unavailable"===(null==r?void 0:r.status)?"n/a":null!==(i=null==r?void 0:r.value)&&void 0!==i?i:""}else s="n/a (custom content)";return s}))));return n?{status:"pending"}:{status:"ready",message:{type:"data",payload:r}}}(t,o);"ready"===e.status&&(await a.exec((()=>n(e.message))),a.exec((()=>r({type:"PageExported"}))))}}}else a.exec((()=>o({offset:0,limit:e.currentLimit,reload:!0})))},()=>{t().abort("unmount")}]}class bt{constructor(){this.aborted=!1,this.reason=null}async exec(e){this.isAborted||await e()}abort(e){this.aborted=!0,this.reason=e}get isAborted(){return this.aborted}get abortReason(){return this.reason}}function yt(e,t){return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2166136261;const n=e.length;for(let r=0;r<n;r++)t^=e.charCodeAt(r),t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24);return t>>>0}(JSON.stringify({name:t,columns:e.map((e=>({columnId:e.columnId,canSort:e.canSort,canHide:e.canHide,canResize:e.canResize,canDrag:e.canDrag})))})).toString()}function Et(e,t){return e.flatMap((e=>{let[n,r]=e;var o;const{attrId:a}=null!==(o=t.find((e=>e.columnId===n)))&&void 0!==o?o:{};return a?[[a,r]]:[]}))}function Ct(e,t){return e.flatMap((e=>{let[n,r]=e;var o;const a=null===(o=t.find((e=>e.attrId===n)))||void 0===o?void 0:o.columnId;return a?[[a,r]]:[]}))}function xt(e,t){return{sortOrder:e.sortOrder,columnOrder:e.columnOrder,hidden:new Set(e.columns.flatMap((e=>e.hidden?[e.columnId]:[]))),size:Object.fromEntries(e.columns.map((e=>[e.columnId,e.size]))),filter:t.filter}}function St(e,t){return{sortOrder:Ct(t.sortOrder,e),size:{},hidden:new Set(e.flatMap((e=>e.initiallyHidden?[e.columnId]:[]))),columnOrder:e.map((e=>e.columnId)),filter:t.filter}}function It(t,n,r){const[o,a]=e.useReducer(kt,{params:t,columns:n},_t),l=e.useMemo((()=>({resize:e=>a({type:"resize",payload:e}),setFilter:e=>a({type:"setFilter",payload:e}),sortBy:e=>a({type:"sortBy",payload:e}),swap:e=>a({type:"swap",payload:e}),toggleHidden:e=>a({type:"toggleHidden",payload:e})})),[a]);return e.useEffect((()=>a({type:"setColumns",payload:n})),[n]),function(t,n){const r=e.useRef(void 0);e.useEffect((()=>{void 0!==r.current&&t(r.current,n),r.current=n}),n)}(((e,t)=>{let[n]=e,[o]=t;return r(n,o)}),[o]),[o,l]}function kt(e,t){switch(t.type){case"resize":return{...e,size:Pt(e.size,t.payload)};case"setFilter":return e.filter===t.payload?e:{...e,filter:t.payload};case"setColumns":return e.allColumns===t.payload?e:function(e,t){const n=At(t,e.columnOrder);let r=e.hidden,o=Nt(n,r);0===o.length&&(r=new Set,o=Nt(n,r));return{...e,allColumns:t,availableColumns:n,visibleColumns:o,hidden:r}}(e,t.payload);case"sortBy":return{...e,sortOrder:Mt(e.sortOrder,t.payload)};case"swap":{const n=function(e,t){let[n,r]=t;const o=e.indexOf(n),a=e.indexOf(r);if(-1===o||-1===a)return console.warn("Unable to find column in the current order array."),e;if(o!==a){const t=[...e];return t[o]=r,t[a]=n,t}return e}(e.columnOrder,t.payload),r=At(e.allColumns,n);return{...e,columnOrder:n,availableColumns:r,visibleColumns:Nt(r,e.hidden)}}case"toggleHidden":{const o=function(e,t,n){if(e.some((e=>!n.has(e.columnId))))return n;return t}(e.availableColumns,e.hidden,function(e,t){const n=new Set(e);!1===n.delete(t)&&n.add(t);return n}(e.hidden,t.payload));return e.hidden===o?e:{...e,hidden:o,sortOrder:(n=e.sortOrder,r=t.payload,n.flatMap((e=>e[0]===r?[]:[e]))),visibleColumns:Nt(e.availableColumns,o)}}}var n,r}function At(e,t){return function(e,t){const n=[...e],r=Object.fromEntries(t.map(((e,t)=>[e,t])));return n.sort(((e,t)=>r[e.columnId]-r[t.columnId])),n}(e,t).filter((e=>e.visible))}function Nt(e,t){return e.filter((e=>!t.has(e.columnId)))}function Pt(e,t){let[n,r]=t;return{...e,[n]:r}}function Mt(e,t){const[[n,r]=[]]=e;return n===t?"asc"===r?[[t,"desc"]]:[]:[[t,"asc"]]}function _t(e){let{params:t,columns:n}=e;const r=At(n,t.columnOrder),o=Nt(r,t.hidden);return{allColumns:n,availableColumns:r,columnOrder:t.columnOrder,filter:t.filter,hidden:t.hidden,size:t.size,sortOrder:t.sortOrder,visibleColumns:o}}const Ot=t=>{const{pagination:n,showPagingButtons:r,totalCount:o,limit:a}=t;return e.useMemo((()=>"buttons"===n&&("always"===r||"auto"===r&&!!o&&o>a)),[n,r,o,a])};class Rt{constructor(e){this.properties=e}get alignment(){return this.properties.alignment}get canSort(){return this.properties.sortable}get canResize(){return this.properties.resizable}get canDrag(){return this.properties.draggable}get canHide(){return"no"!==this.properties.hidable}get initiallyHidden(){return"hidden"===this.properties.hidable}get weight(){var e;return null!==(e=this.properties.size)&&void 0!==e?e:1}get width(){return this.properties.width}get wrapText(){return this.properties.wrapText}}class Tt extends Rt{constructor(e,t){var n,r;super(e),this.props=e,this.columnNumber=t,this.visible=null!==(r=null===(n=e.visible)||void 0===n?void 0:n.value)&&void 0!==r&&r}columnClass(e){var t;return null===(t=this.props.columnClass)||void 0===t?void 0:t.get(e).value}get canSort(){var e;return super.canSort&&!!(null===(e=this.props.attribute)||void 0===e?void 0:e.sortable)}get columnId(){return this.columnNumber.toString()}get header(){var e,t;return null!==(t=null===(e=this.props.header)||void 0===e?void 0:e.value)&&void 0!==t?t:""}get status(){var e,t;return null!==(t=null===(e=this.props.visible)||void 0===e?void 0:e.status)&&void 0!==t?t:"loading"}get attrId(){var e;return null===(e=this.props.attribute)||void 0===e?void 0:e.id}setInitParams(){this.props.filterAssociationOptions&&this.props.filterAssociationOptions.setLimit(0)}renderCellContent(t){var n,r,o,a,l,i,s;switch(this.props.showContentAs){case"attribute":case"dynamicText":return e.createElement("span",{className:"td-text",title:null===(r=null===(n=this.props.tooltip)||void 0===n?void 0:n.get(t))||void 0===r?void 0:r.value},"attribute"===this.props.showContentAs?null===(a=null===(o=this.props.attribute)||void 0===o?void 0:o.get(t))||void 0===a?void 0:a.displayValue:null===(i=null===(l=this.props.dynamicText)||void 0===l?void 0:l.get(t))||void 0===i?void 0:i.value);case"customContent":return e.createElement(zt,null,null===(s=this.props.content)||void 0===s?void 0:s.get(t));default:throw new Error("Unknown content type: ".concat(this.props.showContentAs))}}}const Lt=e=>{e.stopPropagation()},Dt=e=>{"Tab"!==e.code&&e.stopPropagation()};function zt(t){return e.createElement("div",{onClick:Lt,onKeyUp:Lt,onKeyDown:Dt,className:"td-custom-content"},t.children)}class Vt{constructor(e,t){this.attr=e,this.hash=t}load(){if("string"==typeof this.attr.value&&this.attr.value.length>0){const e=JSON.parse(this.attr.value);if(e.settingsHash===this.hash)return e;this.reset()}}save(e){this.attr.setValue(JSON.stringify(e))}reset(){this.attr.setValue(void 0)}}class Ht{constructor(){this.state=this.pending(),this.initialized=!1}getInitState(e,t,n,r,o){if("ready"===this.state.status)return this.state;if(this.initialized||(this.setInitParams(e,r,t,n),this.initialized=!0),"loading"===o.status||"loading"===e.status||r.some((e=>"loading"===e.status)))return this.pending();let a,l=!1;return"available"===o.status&&(a=o.settings.load(),a&&(this.setViewState(e,a,r),e.reload(),l=!0)),this.state=this.ready(e,r,a),l?this.pending():this.state}setInitParams(e,t,n,r){"buttons"===n&&e.requestTotalCount(!0),e.setLimit(r),t.forEach((e=>e.setInitParams()))}setViewState(e,t,n){t.sortOrder.length>0&&e.setSortOrder(Et(t.sortOrder,n))}ready(e,t,n){return{status:"ready",initParams:n?xt(n,e):St(t,e)}}pending(){return{status:"pending"}}}const[Ft,Kt]=((e,t)=>{let n=null;const r=()=>{null!==n&&(clearTimeout(n),n=null)};return[function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];r(),n=setTimeout((()=>e(...a)),t)},r]})(((e,t)=>{e.save(t)}),500);function Ut(t){let{name:n,columns:r,datasource:o,pageSize:a,pagination:l,configurationAttribute:i}=t;const s=e.useMemo((()=>new Ht),[]),c=e.useMemo((()=>r.map(((e,t)=>new Tt(e,t)))),[r]),u=e.useMemo((()=>yt(c,n)),[n,c]),d=function(t,n){return e.useMemo((()=>"available"===(null==n?void 0:n.status)?{status:"available",settings:new Vt(n,t)}:"loading"===(null==n?void 0:n.status)?{status:"loading",settings:void 0}:{status:"unavailable",settings:void 0}),[t,n])}(u,i),m=Y(((e,t)=>{if(e.filter!==t.filter&&o.setFilter(t.filter),e.sortOrder!==t.sortOrder&&o.setSortOrder(Et(t.sortOrder,c)),"available"===d.status){const e={schemaVersion:1,settingsHash:(r={settingsHash:u,name:n,columns:t.allColumns,hidden:t.hidden,columnOrder:t.columnOrder,size:t.size,sortOrder:t.sortOrder}).settingsHash,name:r.name,sortOrder:r.sortOrder,columnOrder:r.columnOrder,columns:r.columns.map((e=>{let{columnId:t}=e;return{columnId:t,hidden:r.hidden.has(t),size:r.size[t],filterSettings:void 0}}))};Ft(d.settings,e)}var r}));return e.useEffect((()=>Kt),[]),{initState:s.getInitState(o,l,a,c,d),columns:c,stateChangeFx:m}}function Bt(n){var o,l,i,c,u;const d="virtualScrolling"===n.pagination,m=d?n.datasource.limit/n.pageSize:n.datasource.offset/n.pageSize,p=e.useRef(void 0),[g,h]=e.useState(!1),v={[r.STRING]:e.useState(),[r.NUMBER]:e.useState(),[r.DATE]:e.useState(),[r.ENUMERATION]:e.useState(),[r.ASSOCIATION]:e.useState()},{FilterContext:w}=a(),[b,y]=It(n.initParams,n.mappedColumns,n.onStateChange),[{items:E,exporting:C,processedRows:x},{abort:k}]=gt({columns:e.useMemo((()=>b.visibleColumns.map((e=>n.columns[e.columnNumber]))),[b.visibleColumns,n.columns]),hasMoreItems:n.datasource.hasMoreItems||!1,items:n.datasource.items,name:n.name,offset:n.datasource.offset,limit:n.datasource.limit,updateDataSource:e.useCallback((e=>{let{offset:t,limit:r,reload:o}=e;var a,l;null!=t&&(null===(a=n.datasource)||void 0===a||a.setOffset(t)),null!=r&&(null===(l=n.datasource)||void 0===l||l.setLimit(r)),o&&n.datasource.reload()}),[n.datasource])});e.useEffect((()=>{!n.datasource.filter||g||p.current||(p.current=n.datasource.filter)}),[n.datasource,g]),e.useEffect((()=>{n.refreshInterval>0&&setTimeout((()=>{n.datasource.reload()}),1e3*n.refreshInterval)}),[n.datasource,n.refreshInterval]);const A=e.useCallback((e=>{const t=e(m);d?n.datasource.setLimit(t*n.pageSize):n.datasource.setOffset(t*n.pageSize)}),[n.datasource,n.pageSize,d,m]),N=n.columns.map((()=>e.useState())),P=N.map((e=>{let[t]=e;return t})),M=Object.keys(v).map((e=>v[e][0])),_=e.useMemo((()=>N.map((e=>{let[t]=e;var n;return null===(n=null==t?void 0:t.getFilterCondition)||void 0===n?void 0:n.call(t)})).filter((e=>void 0!==e)).concat(Object.keys(v).map((e=>{var t;return null===(t=v[e][0])||void 0===t?void 0:t.getFilterCondition()})).filter((e=>void 0!==e)))),[...P,...M]);e.useEffect((()=>{_.length>0?y.setFilter(_.length>1?t.and(..._):_[0]):g?y.setFilter(void 0):y.setFilter(p.current)}),[_,g,y]);const O=f(n.itemSelection,n.datasource,n.onSelectionChange,n.pageSize),R=function(t){const n=e.useCallback((()=>{"Multi"===(null==t?void 0:t.type)&&("all"===t.selectionStatus?t.selectNone():t.selectAll())}),[t]),r="Multi"===(null==t?void 0:t.type)?t.selectionStatus:void 0;return e.useMemo((()=>{if(void 0!==r)return{status:r,toggle:n}}),[r,n])}(O),T=S({selection:n.itemSelection,selectionMethod:n.itemSelectionMethod,helper:O,showSelectAllToggle:n.showSelectAllToggle});return e.createElement(lt,{className:n.class,CellComponent:K,columnsDraggable:n.columnsDraggable,columnsFilterable:n.columnsFilterable,columnsHidable:n.columnsHidable,columnsResizable:n.columnsResizable,columnsSortable:n.columnsSortable,data:E,emptyPlaceholderRenderer:e.useCallback((t=>"custom"===n.showEmptyPlaceholder?t(n.emptyPlaceholder):e.createElement("div",null)),[n.emptyPlaceholder,n.showEmptyPlaceholder]),filterRenderer:e.useCallback(((t,r)=>{const o=n.columns[r],{attribute:a,filter:l}=o,i=ut(o),[,c]=N[r],u=s(a,p.current);return t(a||i?e.createElement(w.Provider,{value:{filterDispatcher:e=>(h(!0),c(e),e),singleAttribute:a,singleInitialFilter:u,associationProperties:i}},l):l)}),[w,N,n.columns]),headerTitle:null===(o=n.filterSectionTitle)||void 0===o?void 0:o.value,headerContent:n.filtersPlaceholder&&e.createElement(st,{filterList:n.filterList,setFiltered:h,viewStateFilters:p.current,selectionContextValue:R,state:v},n.filtersPlaceholder),hasMoreItems:null!==(l=n.datasource.hasMoreItems)&&void 0!==l&&l,headerWrapperRenderer:e.useCallback(((e,t)=>t),[]),id:e.useMemo((()=>"DataGrid".concat(I())),[]),numberOfItems:n.datasource.totalCount,onExportCancel:k,page:m,pageSize:n.pageSize,paging:Ot({pagination:n.pagination,showPagingButtons:n.showPagingButtons,totalCount:n.datasource.totalCount,limit:n.datasource.limit}),pagingPosition:n.pagingPosition,rowClass:e.useCallback((e=>{var t,r,o;return null!==(o=null===(r=null===(t=n.rowClass)||void 0===t?void 0:t.get(e))||void 0===r?void 0:r.value)&&void 0!==o?o:""}),[n.rowClass]),setPage:A,styles:n.style,valueForSort:e.useCallback(((e,t)=>{const r=n.columns[t];return r.attribute?r.attribute.get(e).value:""}),[n.columns]),rowAction:n.onClick,selectionProps:T,selectionStatus:"Multi"===(null==O?void 0:O.type)?O.selectionStatus:"unknown",exporting:C,processedRows:x,exportDialogLabel:null===(i=n.exportDialogLabel)||void 0===i?void 0:i.value,cancelExportLabel:null===(c=n.cancelExportLabel)||void 0===c?void 0:c.value,selectRowLabel:null===(u=n.selectRowLabel)||void 0===u?void 0:u.value,state:b,actions:y})}return function(t){const{initState:n,columns:r,stateChangeFx:o}=Ut(t);return"pending"===n.status?null:e.createElement(Bt,{...t,initParams:n.initParams,mappedColumns:r,onStateChange:o})}}));
